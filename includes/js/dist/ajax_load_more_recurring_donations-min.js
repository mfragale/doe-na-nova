jQuery(document).ready(function(t){console.log("HELLO doenanova_load_more_recurring_donations"),console.log(phpVars),t("#loadmore_recurring_donations-btn").click(function(a){console.log("Load more button clicked"),dataSend={},dataSend.action=phpVars["wp-action-doenanova-load-more-doacoes-recorrentes"],dataSend.last_subscription=t("#last_subscription").val(),t(".loadmore_recurring_donations-message").hide();var n=t("#loadmore_recurring_donations-btn").html();t("#loadmore_recurring_donations-btn").attr("disabled","disabled").addClass("loading").html('<i class="fas fa-circle-notch fa-spin"></i>'),t.ajax({type:"post",url:phpVars["checkout-url"],data:dataSend,dataType:"json"}).done(function(a,s){console.log("$.ajax.done"),console.log("data: ",a),console.log("status: ",s),t("#loadmore_recurring_donations-btn").removeAttr("disabled").removeClass("loading").html(n),a.success?(t.each(a,function(a,n){"success"!==a&&"has_more_subscriptions"!==a&&(t("#last_subscription").attr("value",n.subscription_id),t("#recorrentes").append(function(){var t=n.subscription_id,a=n.subscription_status,s=n.subscription_purpose,e=n.subscription_interval,o=(n.customer_cardBrand,n.customer_cardLast4,n.subscription_planAmount),r=n.subscription_date,p=new Date(1e3*r),i=new Array;i[0]=phpVars.jan,i[1]=phpVars.feb,i[2]=phpVars.mar,i[3]=phpVars.apr,i[4]=phpVars.may,i[5]=phpVars.jun,i[6]=phpVars.jul,i[7]=phpVars.aug,i[8]=phpVars.sep,i[9]=phpVars.oct,i[10]=phpVars.nov,i[11]=phpVars.dec;i[p.getMonth()],p.getFullYear(),p.getDate(),p.getMonth();var l=new Array;l[0]=phpVars.sun,l[1]=phpVars.mon,l[2]=phpVars.tue,l[3]=phpVars.wed,l[4]=phpVars.thu,l[5]=phpVars.fri,l[6]=phpVars.sat;l[p.getDay()];var c=n.subscription_nextBilling,d=new Date(1e3*c),u=new Array;u[0]=phpVars.jan,u[1]=phpVars.feb,u[2]=phpVars.mar,u[3]=phpVars.apr,u[4]=phpVars.may,u[5]=phpVars.jun,u[6]=phpVars.jul,u[7]=phpVars.aug,u[8]=phpVars.sep,u[9]=phpVars.oct,u[10]=phpVars.nov,u[11]=phpVars.dec;u[d.getMonth()],d.getFullYear(),d.getDate(),d.getMonth();var h=new Array;h[0]=phpVars.sun,h[1]=phpVars.mon,h[2]=phpVars.tue,h[3]=phpVars.wed,h[4]=phpVars.thu,h[5]=phpVars.fri,h[6]=phpVars.sat;h[d.getDay()];if("active"==a)var m="is-success",_="check-circle";else if("incomplete"==a)m="is-warning",_="exclamation-circle";else if("canceled"==a)m="is-danger",_="times-circle";if("week"==e)var g=phpVars.week;else if("month"==e)g=phpVars.month;else if("year"==e)g=phpVars.year;else g=phpVars.one_time;return'\n\t\t\t\t\t\t\t<div class="accordion-item '+a+'" id="subs-'+t+'">\n\t\t\t\t\t\t\t\t<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#subs-'+t+'-dropdown" aria-expanded="true" aria-controls="subs-'+t+'-dropdown">\n\t\t\t\t\t\t\t\t\t<div class="col">\n\t\t\t\t\t\t\t\t\t\t<div>'+s+"</div>\n\t\t\t\t\t\t\t\t\t\t<div><small>"+g+'</small></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="col">\n\t\t\t\t\t\t\t\t\t\t'+phpVars.doe_na_nova_currency_symbol_js+o+',00\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<div id="subs-'+t+"-dropdown\" class=\"accordion-collapse collapse\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\n\t\t\t\t\t\t\t\t\t<div class=\"accordion-body\">\n\t\t\t\t\t\t\t\t\t\t<p><small><strong><?php _e('Created on', 'doenanova'); ?></strong>: <?php echo strftime(\"%a, %d/%m/%y\", $subscription->created); ?></small></p>\n\t\t\t\t\t\t\t\t\t\t<p><small><strong><?php _e('Frequency', 'doenanova'); ?></strong>: <?php echo $subscription_interval; ?></small></p>\n\t\t\t\t\t\t\t\t\t\t<p><small><strong><?php _e('Next billing', 'doenanova'); ?></strong>: <?php echo strftime(\"%a, %d/%m/%y\", $subscription->current_period_end); ?></small></p>\n\t\t\t\t\t\t\t\t\t\t<p><small><strong><?php _e('Amount', 'doenanova'); ?></strong>: <?php echo doe_na_nova_currency_symbol(); ?><?php echo $subscription->plan->amount / 100; ?>,00</small></p>\n\t\t\t\t\t\t\t\t\t\t<p><small><strong><?php _e('Payment method', 'doenanova'); ?></strong>: <i class=\"fab fa-cc-<?php echo $customer_cardBrand; ?>\"></i> <?php echo $customer_cardLast4; ?></small></p>\n\t\t\t\t\t\t\t\t\t\t<p><small><strong><?php _e('Purpose', 'doenanova'); ?></strong>: <?php echo $subscription->metadata->Purpose; ?></small></p>\n\t\t\t\t\t\t\t\t\t\t<p><small><strong><?php _e('Status', 'doenanova'); ?></strong>: <span class=\""+m+' tag"><i class="fas fa-xs fa-'+_+"\"></i> <?php _e('Active', 'doenanova'); ?></span></small></p>\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t<form action=\"<?php echo get_admin_url(); ?>admin-post.php\" method=\"POST\">\n\t\t\t\t\t\t\t\t\t\t\t<input type='hidden' name='action' value='stripe_cancel_subscription' />\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name='subscription_id' value='"+t+'\' />\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="current_url" id="current_url" value="<?php echo get_permalink(); ?>">\n\t\t\t\t\t\t\t\t\t\t\t<button class="btn btn-xs btn-danger load-on-click cancel_subscription_btn" title="<?php _e(\'Delete this recurring donation\', \'doenanova\'); ?>"><i class="fas fa-trash-alt"></i> <?php _e(\'Delete this recurring donation\', \'doenanova\'); ?></button>\n\t\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t'}),t(".new_subscriptions").hide(),t(".new_subscriptions").fadeIn(800).removeClass("new_subscriptions"))}),a.has_more_subscriptions||t("#loadmore_recurring_donations-btn").hide()):t("#loadmore_recurring_donations-fail-message").fadeIn(800)}).fail(function(a,s,e){console.log("$.ajax.fail"),console.log("data: ",a),console.log("status: ",s),console.log("error: ",e),t("#loadmore_recurring_donations-btn").removeAttr("disabled").removeClass("loading").html(n),t("#loadmore_recurring_donations-fail-message").fadeIn(800)}),a.preventDefault()})});