jQuery(document).ready(function(t){console.log("HELLO doenanova_load_more_recurring_donations"),console.log(phpVars),t("#loadmore_recurring_donations-btn").click(function(a){console.log("Load more button clicked"),dataSend={},dataSend.action=phpVars["wp-action-doenanova-load-more-recurring-donations"],dataSend.last_subscription=t("#last_subscription").val(),t(".loadmore_recurring_donations-message").hide();var n=t("#loadmore_recurring_donations-btn").html();t("#loadmore_recurring_donations-btn").attr("disabled","disabled").addClass("loading").html('<i class="fas fa-circle-notch fa-spin"></i>'),t.ajax({type:"post",url:phpVars["checkout-url"],data:dataSend,dataType:"json"}).done(function(a,s){console.log("$.ajax.done"),console.log("data: ",a),console.log("status: ",s),t("#loadmore_recurring_donations-btn").removeAttr("disabled").removeClass("loading").html(n),a.success?(t.each(a,function(a,n){"success"!==a&&"has_more_subscriptions"!==a&&(t("#last_subscription").attr("value",n.subscription_id),t("#recorrentes").append(function(){var t=n.subscription_id,a=n.subscription_status,s=n.subscription_purpose,e=n.subscription_interval,r=n.customer_cardBrand,o=n.customer_cardLast4,i=n.subscription_planAmount,d=n.subscription_date,l=new Date(1e3*d),c=new Array;c[0]=phpVars.jan,c[1]=phpVars.feb,c[2]=phpVars.mar,c[3]=phpVars.apr,c[4]=phpVars.may,c[5]=phpVars.jun,c[6]=phpVars.jul,c[7]=phpVars.aug,c[8]=phpVars.sep,c[9]=phpVars.oct,c[10]=phpVars.nov,c[11]=phpVars.dec;c[l.getMonth()],("0"+(l.getMonth()+1)).slice(-2);var p=l.getFullYear().toString().substr(-2),u=("0"+l.getDate()).slice(-2),h=("0"+(l.getMonth()+1)).slice(-2),b=new Array;b[0]=phpVars.sun,b[1]=phpVars.mon,b[2]=phpVars.tue,b[3]=phpVars.wed,b[4]=phpVars.thu,b[5]=phpVars.fri,b[6]=phpVars.sat;var m=b[l.getDay()],_=n.subscription_nextBilling,g=new Date(1e3*_),v=new Array;v[0]=phpVars.jan,v[1]=phpVars.feb,v[2]=phpVars.mar,v[3]=phpVars.apr,v[4]=phpVars.may,v[5]=phpVars.jun,v[6]=phpVars.jul,v[7]=phpVars.aug,v[8]=phpVars.sep,v[9]=phpVars.oct,v[10]=phpVars.nov,v[11]=phpVars.dec;v[g.getMonth()],("0"+(g.getMonth()+1)).slice(-2);var V=g.getFullYear().toString().substr(-2),f=("0"+g.getDate()).slice(-2),y=("0"+(g.getMonth()+1)).slice(-2),w=new Array;w[0]=phpVars.sun,w[1]=phpVars.mon,w[2]=phpVars.tue,w[3]=phpVars.wed,w[4]=phpVars.thu,w[5]=phpVars.fri,w[6]=phpVars.sat;var x=w[g.getDay()];if("active"==a)var j="is-success",S="check-circle";else if("incomplete"==a)j="is-warning",S="exclamation-circle";else if("canceled"==a)j="is-danger",S="times-circle";if("week"==e)var A=phpVars.week;else if("month"==e)A=phpVars.month;else if("year"==e)A=phpVars.year;else A=phpVars.one_time;return'\n\t\t\t\t\t\t\t<div class="accordion-item '+a+'" id="subs-'+t+'">\n\t\t\t\t\t\t\t\t<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#subs-'+t+'-dropdown" aria-expanded="true" aria-controls="subs-'+t+'-dropdown">\n\t\t\t\t\t\t\t\t\t<div class="col">\n\t\t\t\t\t\t\t\t\t\t<div class="fw-bold">'+s+'</div>\n\t\t\t\t\t\t\t\t\t\t<div><small class="text-muted">'+A+'</small></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="col text-end me-3">\n\t\t\t\t\t\t\t\t\t\t'+phpVars.doe_na_nova_currency_symbol_js+i+',00\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<div id="subs-'+t+'-dropdown" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">\n\t\t\t\t\t\t\t\t\t<div class="accordion-body">\n\n\t\t\t\t\t\t\t\t\t\t\x3c!-- Button trigger modal --\x3e\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-xs btn-danger float-end" data-bs-toggle="modal" data-bs-target="#'+t+'-modal" title="Deletar esta doação recorrente">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fas fa-trash-alt"></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\n\t\t\t\t\t\t\t\t\t\t<table class="table">\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Criada em</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+m+", "+u+"/"+h+"/"+p+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Frequência</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+A+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Próximo pagamento</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+x+", "+f+"/"+y+"/"+V+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Valor</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+phpVars.doe_na_nova_currency_symbol_js+i+',00</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Método de pagamento</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><i class="fab fa-cc-'+r+'"></i> '+o+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Propósito</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+s+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Status</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><span class="'+j+' tag"><i class="fas fa-xs fa-'+S+'"></i> Ativo</span></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t\t\t\t\t\x3c!-- Modal --\x3e\n\t\t\t\t\t\t\t\t\t\t<div class="modal fade" id="'+t+'-modal" tabindex="-1" aria-labelledby="'+t+'-modalLabel" aria-hidden="true">\n\t\t\t\t\t\t\t\t\t\t\t<div class="modal-dialog">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="modal-header">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h5 class="modal-title" id="'+t+'-modalLabel">Cancelar doação recorrente</h5 >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div >\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="modal-body">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tTem certeza que deseja encerrar a doação '+A+" de "+phpVars.doe_na_nova_currency_symbol_js+i+",00 para "+s+'?\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<form action="'+phpVars.action_url+"\" method=\"POST\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='hidden' name='action' value='stripe_cancel_subscription' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name='subscription_id' value='"+t+'\' />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="current_url" id="current_url" value="'+phpVars.current_url+'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger load-on-click">Sim, cancele por favor</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t'}),t(".new_subscriptions").hide(),t(".new_subscriptions").fadeIn(800).removeClass("new_subscriptions"))}),a.has_more_subscriptions||t("#loadmore_recurring_donations-btn").hide()):t("#loadmore_recurring_donations-fail-message").fadeIn(800)}).fail(function(a,s,e){console.log("$.ajax.fail"),console.log("data: ",a),console.log("status: ",s),console.log("error: ",e),t("#loadmore_recurring_donations-btn").removeAttr("disabled").removeClass("loading").html(n),t("#loadmore_recurring_donations-fail-message").fadeIn(800)}),a.preventDefault()})});