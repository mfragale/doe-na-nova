jQuery(document).ready(function(t){t("#loadmore_recurring_donations-btn").click(function(a){dataSend={},dataSend.action=phpVars["wp-action-doenanova-load-more-doacoes-recorrentes"],dataSend.last_subscription=t("#last_subscription").val(),t(".loadmore_recurring_donations-message").hide();var n=t("#loadmore_recurring_donations-btn").html();t("#loadmore_recurring_donations-btn").attr("disabled","disabled").addClass("loading").html('<i class="fas fa-circle-notch fa-spin"></i>'),t.ajax({type:"post",url:phpVars["checkout-url"],data:dataSend,dataType:"json"}).done(function(a,s){t("#loadmore_recurring_donations-btn").removeAttr("disabled").removeClass("loading").html(n),a.success?(t.each(a,function(a,n){"success"!==a&&"has_more_subscriptions"!==a&&(t("#last_subscription").attr("value",n.subscription_id),t("#recorrentes").append(function(){var t=n.subscription_id,a=n.subscription_status,s=n.subscription_purpose,r=n.subscription_interval,e=n.customer_cardBrand,o=n.customer_cardLast4,i=n.subscription_planAmount,p=n.subscription_date,c=new Date(1e3*p),d=new Array;d[0]=phpVars.jan,d[1]=phpVars.feb,d[2]=phpVars.mar,d[3]=phpVars.apr,d[4]=phpVars.may,d[5]=phpVars.jun,d[6]=phpVars.jul,d[7]=phpVars.aug,d[8]=phpVars.sep,d[9]=phpVars.oct,d[10]=phpVars.nov,d[11]=phpVars.dec;d[c.getMonth()],("0"+(c.getMonth()+1)).slice(-2);var l=c.getFullYear().toString().substr(-2),u=("0"+c.getDate()).slice(-2),h=("0"+(c.getMonth()+1)).slice(-2),b=new Array;b[0]=phpVars.sun,b[1]=phpVars.mon,b[2]=phpVars.tue,b[3]=phpVars.wed,b[4]=phpVars.thu,b[5]=phpVars.fri,b[6]=phpVars.sat;var _=b[c.getDay()],m=n.subscription_nextBilling,V=new Date(1e3*m),g=new Array;g[0]=phpVars.jan,g[1]=phpVars.feb,g[2]=phpVars.mar,g[3]=phpVars.apr,g[4]=phpVars.may,g[5]=phpVars.jun,g[6]=phpVars.jul,g[7]=phpVars.aug,g[8]=phpVars.sep,g[9]=phpVars.oct,g[10]=phpVars.nov,g[11]=phpVars.dec;g[V.getMonth()],("0"+(V.getMonth()+1)).slice(-2);var v=V.getFullYear().toString().substr(-2),f=("0"+V.getDate()).slice(-2),y=("0"+(V.getMonth()+1)).slice(-2),w=new Array;w[0]=phpVars.sun,w[1]=phpVars.mon,w[2]=phpVars.tue,w[3]=phpVars.wed,w[4]=phpVars.thu,w[5]=phpVars.fri,w[6]=phpVars.sat;var j=w[V.getDay()];if("active"==a)var x="is-success",A="check-circle";else if("incomplete"==a)x="is-warning",A="exclamation-circle";else if("canceled"==a)x="is-danger",A="times-circle";if("week"==r)var D=phpVars.week;else if("month"==r)D=phpVars.month;else if("year"==r)D=phpVars.year;else D=phpVars.one_time;return'\n\t\t\t\t\t\t\t<div class="accordion-item '+a+'" id="subs-'+t+'">\n\t\t\t\t\t\t\t\t<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#subs-'+t+'-dropdown" aria-expanded="true" aria-controls="subs-'+t+'-dropdown">\n\t\t\t\t\t\t\t\t\t<div class="col">\n\t\t\t\t\t\t\t\t\t\t<div>'+s+"</div>\n\t\t\t\t\t\t\t\t\t\t<div><small>"+D+'</small></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="col text-end me-3">\n\t\t\t\t\t\t\t\t\t\t'+phpVars.doe_na_nova_currency_symbol_js+i+',00\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<div id="subs-'+t+'-dropdown" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">\n\t\t\t\t\t\t\t\t\t<div class="accordion-body">\n\t\t\t\t\t\t\t\t\t\t<form action="'+phpVars.action_url+"\" method=\"POST\">\n\t\t\t\t\t\t\t\t\t\t\t<input type='hidden' name='action' value='stripe_cancel_subscription' />\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name='subscription_id' value='"+t+'\' />\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="current_url" id="current_url" value="'+phpVars.current_url+'">\n\t\t\t\t\t\t\t\t\t\t\t<button class="btn btn-xs btn-danger float-end load-on-click cancel_subscription_btn" title="Delete this recurring donation"><i class="fas fa-trash-alt"></i></button>\n\t\t\t\t\t\t\t\t\t\t</form>\n\n\t\t\t\t\t\t\t\t\t\t<table class="table">\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Criada em</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+_+", "+u+"/"+h+"/"+l+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Frequência</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+D+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Próximo pagamento</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+j+", "+f+"/"+y+"/"+v+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Valor</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+phpVars.doe_na_nova_currency_symbol_js+i+',00</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Método de pagamento</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><i class="fab fa-cc-'+e+'"></i> '+o+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Propósito</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+s+'</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row">Status</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><span class="'+x+' tag"><i class="fas fa-xs fa-'+A+'"></i> Ativo</span></td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t'}),t(".new_subscriptions").hide(),t(".new_subscriptions").fadeIn(800).removeClass("new_subscriptions"))}),a.has_more_subscriptions||t("#loadmore_recurring_donations-btn").hide()):t("#loadmore_recurring_donations-fail-message").fadeIn(800)}).fail(function(a,s,r){t("#loadmore_recurring_donations-btn").removeAttr("disabled").removeClass("loading").html(n),t("#loadmore_recurring_donations-fail-message").fadeIn(800)}),a.preventDefault()})});